# åç«¯æŠ€æœ¯æ–‡æ¡£

> ğŸ“– **åç«¯ä¸“é¡¹æ–‡æ¡£** | [â† è¿”å›ä¸»æ–‡æ¡£ README.md](../README.md) | [â† è¿”å›æ–‡æ¡£ç´¢å¼•](./æ–‡æ¡£ç´¢å¼•.md)

æœ¬æ–‡æ¡£æ·±å…¥åˆ†æElectronæ‰“å°åº”ç”¨çš„åç«¯æŠ€æœ¯å®ç°ï¼ŒåŒ…å«Spring Bootåº”ç”¨æ¶æ„ã€æ‰“å°æœåŠ¡è®¾è®¡ã€é˜Ÿåˆ—ç®¡ç†ã€WebSocketé€šä¿¡ç­‰æ ¸å¿ƒå†…å®¹ã€‚

---

## ğŸ“‹ åç«¯æŠ€æœ¯æ ˆ

### æŠ€æœ¯é€‰å‹æ€»è§ˆ
- **æ¡†æ¶ç‰ˆæœ¬**: Spring Boot 2.6.13
- **Javaç‰ˆæœ¬**: JDK 8
- **æ„å»ºå·¥å…·**: Maven 3.8.1
- **æ‰“åŒ…æ–¹å¼**: å¯æ‰§è¡ŒJAR + Launch4j EXE
- **æ•°æ®å­˜å‚¨**: æ–‡ä»¶ç³»ç»ŸæŒä¹…åŒ–
- **é€šä¿¡åè®®**: RESTful API + WebSocket/STOMP

### åç«¯ç‰¹è‰²
- âœ… **ä¼ä¸šçº§æ¶æ„** - æ ‡å‡†çš„Spring Bootåˆ†å±‚æ¶æ„
- âœ… **å¼‚æ­¥å¤„ç†** - åŸºäºé˜Ÿåˆ—çš„å¼‚æ­¥æ‰“å°ä»»åŠ¡å¤„ç†
- âœ… **å®æ—¶é€šä¿¡** - WebSocket + STOMPåè®®åŒå‘é€šä¿¡
- âœ… **é«˜å¯é æ€§** - ä»»åŠ¡æŒä¹…åŒ–ã€é‡è¯•æœºåˆ¶ã€æ•…éšœæ¢å¤
- âœ… **å¤šæ‰“å°æœºæ”¯æŒ** - çµæ´»çš„æ‰“å°æœºé€‰æ‹©å’Œç®¡ç†

## ğŸ—ï¸ åç«¯æ¶æ„è®¾è®¡

### åˆ†å±‚æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Spring Boot åç«¯æœåŠ¡                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸŒ æ§åˆ¶å™¨å±‚ (Controllers) - APIå…¥å£                        â”‚
â”‚  â”œâ”€â”€ PrintApiController (RESTful API)                      â”‚
â”‚  â”œâ”€â”€ UserAuthController (ç”¨æˆ·è®¤è¯)                         â”‚
â”‚  â””â”€â”€ PrintMessageController (WebSocketæ¶ˆæ¯)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ”§ æœåŠ¡å±‚ (Services) - ä¸šåŠ¡é€»è¾‘                            â”‚
â”‚  â”œâ”€â”€ UnifiedPrintService (ç»Ÿä¸€æ‰“å°æœåŠ¡)                     â”‚
â”‚  â”œâ”€â”€ UserAuthService (ç”¨æˆ·è®¤è¯æœåŠ¡)                         â”‚
â”‚  â”œâ”€â”€ RemoteDataService (è¿œç¨‹æ•°æ®æœåŠ¡)                       â”‚
â”‚  â””â”€â”€ PrintTaskNotificationService (ä»»åŠ¡é€šçŸ¥æœåŠ¡)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ”© ç»„ä»¶å±‚ (Components) - åŠŸèƒ½ç»„ä»¶                          â”‚
â”‚  â”œâ”€â”€ PrintQueueManager (é˜Ÿåˆ—ç®¡ç†å™¨)                         â”‚
â”‚  â”œâ”€â”€ PrintTaskPersistence (ä»»åŠ¡æŒä¹…åŒ–)                      â”‚
â”‚  â”œâ”€â”€ PrintWebSocketHandler (WebSocketå¤„ç†)                 â”‚
â”‚  â””â”€â”€ PrintMetrics (æ€§èƒ½ç›‘æ§)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âš™ï¸ é…ç½®å±‚ (Configurations) - ç³»ç»Ÿé…ç½®                     â”‚
â”‚  â”œâ”€â”€ StompWebSocketConfig (STOMPé…ç½®)                      â”‚
â”‚  â”œâ”€â”€ ThreadPoolConfig (çº¿ç¨‹æ± é…ç½®)                          â”‚
â”‚  â””â”€â”€ SchedulerConfig (è°ƒåº¦å™¨é…ç½®)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç›®å½•ç»“æ„æ¦‚è§ˆ
```
backend/src/main/java/org/example/print/
â”œâ”€â”€ ğŸ“„ PrintApplication.java      # Spring Bootå¯åŠ¨ç±»
â”œâ”€â”€ ğŸ“ controller/                # æ§åˆ¶å™¨å±‚ - APIå…¥å£
â”œâ”€â”€ ğŸ“ service/                   # æœåŠ¡å±‚ - ä¸šåŠ¡é€»è¾‘  
â”œâ”€â”€ ğŸ“ component/                 # ç»„ä»¶å±‚ - åŠŸèƒ½ç»„ä»¶
â”œâ”€â”€ ğŸ“ config/                    # é…ç½®å±‚ - ç³»ç»Ÿé…ç½®
â”œâ”€â”€ ğŸ“ bean/                      # æ•°æ®å±‚ - å®ä½“å¯¹è±¡
â””â”€â”€ ğŸ“ event/                     # äº‹ä»¶å±‚ - äº‹ä»¶å¤„ç†
```

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. RESTful APIæœåŠ¡
**æ–‡ä»¶**: `controller/PrintApiController.java` (195è¡Œ)

**ä¸»è¦æ¥å£**:
```java
@RestController
@RequestMapping("/api")
public class PrintApiController {
    
    // è·å–å¾…å¤„ç†ä»»åŠ¡
    @GetMapping("/tasks/pending")
    public ResponseEntity<List<PrintTask>> getPendingTasks()
    
    // æ·»åŠ æ‰“å°ä»»åŠ¡
    @PostMapping("/tasks")
    public ResponseEntity<PrintTask> addPrintTask(@RequestBody PrintTask task)
    
    // è·å–æ‰“å°æœºåˆ—è¡¨
    @GetMapping("/printers")
    public ResponseEntity<List<Map<String, String>>> getPrinters()
    
    // è·å–ç³»ç»ŸçŠ¶æ€
    @GetMapping("/system/status")
    public ResponseEntity<Map<String, Object>> getSystemStatus()
    
    // æµ‹è¯•æ‰“å°
    @PostMapping("/print/test")
    public ResponseEntity<?> testPrint(@RequestBody Map<String, String> params)
}
```

**åŠŸèƒ½ç‰¹æ€§**:
- âœ… **å®Œæ•´çš„CRUDæ“ä½œ** - ä»»åŠ¡çš„åˆ›å»ºã€æŸ¥è¯¢ã€åˆ é™¤
- âœ… **ç³»ç»ŸçŠ¶æ€ç›‘æ§** - é˜Ÿåˆ—å¤§å°ã€æˆåŠŸç‡ã€æ‰“å°æœºçŠ¶æ€
- âœ… **æ‰“å°æœºç®¡ç†** - è·å–å¯ç”¨æ‰“å°æœºã€è®¾ç½®é»˜è®¤æ‰“å°æœº
- âœ… **æµ‹è¯•åŠŸèƒ½** - æä¾›æ‰“å°æµ‹è¯•æ¥å£

### 2. ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
**æ–‡ä»¶**: `controller/UserAuthController.java` (93è¡Œ)

**è®¤è¯æµç¨‹**:
```java
@RestController
@RequestMapping("/api/user")
public class UserAuthController {
    
    // ç”¨æˆ·ç™»å½•
    @PostMapping("/login")
    public ResponseEntity<Map<String, Object>> login(@RequestBody Map<String, String> loginRequest)
    
    // ç”¨æˆ·ç™»å‡º
    @PostMapping("/logout")
    public ResponseEntity<Map<String, Object>> logout()
    
    // è·å–ç”¨æˆ·çŠ¶æ€
    @GetMapping("/status")
    public ResponseEntity<Map<String, Object>> getStatus()
}
```

**è®¤è¯ç‰¹æ€§**:
- âœ… **ç®€åŒ–è®¤è¯æµç¨‹** - é€‚é…æœ¬åœ°æ¡Œé¢åº”ç”¨åœºæ™¯
- âœ… **çŠ¶æ€ç»´æŠ¤** - ç”¨æˆ·IDã€å•†æˆ·IDã€åº—é“ºIDç®¡ç†
- âœ… **ä¼šè¯ç®¡ç†** - ç™»å½•çŠ¶æ€æŒä¹…åŒ–

### 3. ç»Ÿä¸€æ‰“å°æœåŠ¡
**æ–‡ä»¶**: `service/UnifiedPrintService.java` (546è¡Œ)

**æ ¸å¿ƒåŠŸèƒ½**:
```java
@Service
public class UnifiedPrintService {
    
    // è·å–æ‰€æœ‰æ‰“å°æœº
    public List<PrintService> getAllPrinters()
    
    // æ ¹æ®åç§°è·å–æ‰“å°æœº
    public PrintService getPrinterByName(String printerName)
    
    // æ‰§è¡Œæ‰“å°ä»»åŠ¡
    public CompletableFuture<PrintResult> executePrint(PrintTask task)
    
    // æ£€æŸ¥æ‰“å°æœºçŠ¶æ€
    public boolean isPrinterReady(String printerName)
    
    // æ ¼å¼åŒ–æ‰“å°å†…å®¹
    private String formatPrintContent(JSONObject data)
}
```

**æŠ€æœ¯ç‰¹è‰²**:
- âœ… **æ™ºèƒ½æ‰“å°æœºé€‰æ‹©** - æ”¯æŒæŒ‡å®šæ‰“å°æœºã€é»˜è®¤æ‰“å°æœºã€ç¬¬ä¸€å°å¯ç”¨æ‰“å°æœº
- âœ… **å¤šæ ¼å¼æ”¯æŒ** - JSONæ•°æ®æ ¼å¼åŒ–ã€çº¯æ–‡æœ¬æ‰“å°ã€å›¾ç‰‡æ‰“å°
- âœ… **å¼‚æ­¥æ‰§è¡Œ** - CompletableFutureå¼‚æ­¥æ‰“å°å¤„ç†
- âœ… **æµ‹è¯•æ¨¡å¼** - æ”¯æŒæ–‡ä»¶è¾“å‡ºæ¨¡å¼è¿›è¡Œå¼€å‘æµ‹è¯•

### 4. æ‰“å°é˜Ÿåˆ—ç®¡ç†
**æ–‡ä»¶**: `component/PrintQueueManager.java` (206è¡Œ)

**é˜Ÿåˆ—æ¶æ„**:
```java
@Component
public class PrintQueueManager {
    
    // æ·»åŠ æ‰“å°ä»»åŠ¡
    public void addPrintTask(PrintTask task)
    
    // å®šæ—¶å¤„ç†æ‰“å°ä»»åŠ¡
    @Scheduled(fixedRate = 1000)
    public void processPrintTasks()
    
    // å¤„ç†å¤±è´¥ä»»åŠ¡
    private void handleFailedTask(PrintTask task)
    
    // è·å–é˜Ÿåˆ—å¤§å°
    public int getQueueSize()
}
```

**é˜Ÿåˆ—ç‰¹æ€§**:
- âœ… **é«˜å¹¶å‘æ”¯æŒ** - åŸºäºBlockingQueueçš„çº¿ç¨‹å®‰å…¨é˜Ÿåˆ—
- âœ… **æ™ºèƒ½é‡è¯•** - æŒ‡æ•°é€€é¿ç®—æ³• + éšæœºæŠ–åŠ¨
- âœ… **æŒä¹…åŒ–æ¢å¤** - ç³»ç»Ÿé‡å¯åè‡ªåŠ¨åŠ è½½æœªå®Œæˆä»»åŠ¡
- âœ… **æµé‡æ§åˆ¶** - é˜Ÿåˆ—å¤§å°é™åˆ¶å’Œè¶…æ—¶æœºåˆ¶

### 5. WebSocketå®æ—¶é€šä¿¡
**æ–‡ä»¶**: `config/StompWebSocketConfig.java` (44è¡Œ)

**STOMPé…ç½®**:
```java
@Configuration
@EnableWebSocketMessageBroker
public class StompWebSocketConfig implements WebSocketMessageBrokerConfigurer {
    
    @Override
    public void configureMessageBroker(MessageBrokerRegistry config) {
        config.enableSimpleBroker("/topic");
        config.setApplicationDestinationPrefixes("/app");
    }
    
    @Override
    public void registerStompEndpoints(StompEndpointRegistry registry) {
        registry.addEndpoint("/print-ws")
                .setAllowedOriginPatterns("*")
                .withSockJS()
                .setHeartbeatTime(25000);
    }
}
```

**é€šä¿¡ç‰¹æ€§**:
- âœ… **åŒåè®®æ”¯æŒ** - åŸç”ŸWebSocket + STOMPåè®®
- âœ… **SockJSé™çº§** - ç½‘ç»œç¯å¢ƒå…¼å®¹æ€§ä¿éšœ
- âœ… **å¿ƒè·³æœºåˆ¶** - 25ç§’å¿ƒè·³æ£€æµ‹ä¿æŒè¿æ¥æ´»è·ƒ
- âœ… **å¹¿æ’­æ¨é€** - ä»»åŠ¡çŠ¶æ€å˜æ›´å®æ—¶æ¨é€

## ğŸ—ƒï¸ æ•°æ®æ¨¡å‹è®¾è®¡

### æ ¸å¿ƒå®ä½“å¯¹è±¡
**PrintTask** - æ‰“å°ä»»åŠ¡å®ä½“:
```java
@Data
@Builder
public class PrintTask {
    private String taskId;                 // ä»»åŠ¡ID
    private String content;                // æ‰“å°å†…å®¹
    private PrintTaskStatus status;        // ä»»åŠ¡çŠ¶æ€
    private int retryCount;                // é‡è¯•æ¬¡æ•°
    private LocalDateTime createTime;      // åˆ›å»ºæ—¶é—´
    private String printerName;            // æ‰“å°æœºåç§°
    private PrintTaskPriority priority;    // ä»»åŠ¡ä¼˜å…ˆçº§
}
```

**ä»»åŠ¡çŠ¶æ€æšä¸¾**:
```java
public enum PrintTaskStatus {
    PENDING,    // å¾…å¤„ç†
    PRINTING,   // æ‰“å°ä¸­
    COMPLETED,  // å·²å®Œæˆ
    FAILED      // å¤±è´¥
}
```

**ä»»åŠ¡ä¼˜å…ˆçº§**:
```java
public enum PrintTaskPriority {
    LOW,        // ä½ä¼˜å…ˆçº§
    NORMAL,     // æ™®é€šä¼˜å…ˆçº§
    HIGH        // é«˜ä¼˜å…ˆçº§
}
```

## âš™ï¸ é…ç½®ç®¡ç†

### åº”ç”¨é…ç½® (application.yml)
**æ‰“å°æœåŠ¡é…ç½®**:
```yaml
print:
  printer-name: "GP-C58 Series"      # é»˜è®¤æ‰“å°æœº
  max-retry: 3                       # æœ€å¤§é‡è¯•æ¬¡æ•°
  queue:
    offer-timeout: 5                 # é˜Ÿåˆ—ç­‰å¾…è¶…æ—¶(ç§’)
  qrcode-path: classpath:static/qrcode.jpg  # äºŒç»´ç è·¯å¾„
```

**è¿œç¨‹æœåŠ¡é…ç½®**:
```yaml
remote:
  server:
    url: http://119.91.239.47        # è¿œç¨‹æœåŠ¡å™¨URL
    ws-path: /print-ws               # WebSocketè·¯å¾„
  auth:
    enabled: false                   # æ˜¯å¦å¯ç”¨è®¤è¯
  connection:
    retry-interval: 500              # è¿æ¥é‡è¯•é—´éš”(æ¯«ç§’)
  poll:
    interval: 10000                  # è½®è¯¢é—´éš”(æ¯«ç§’)
```

**æœåŠ¡å™¨é…ç½®**:
```yaml
server:
  port: 23333                        # æœåŠ¡ç«¯å£

logging:
  file:
    name: ${user.home}/AppData/Roaming/electron-print-app/logs/spring.log
  level:
    org.example.print: INFO
```

### Mavenä¾èµ–åˆ†æ
**æ ¸å¿ƒä¾èµ–**:
```xml
<!-- Spring Boot åŸºç¡€ -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-web</artifactId>
</dependency>

<!-- WebSocket æ”¯æŒ -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-websocket</artifactId>
</dependency>

<!-- PDFå¤„ç† -->
<dependency>
    <groupId>org.apache.pdfbox</groupId>
    <artifactId>pdfbox</artifactId>
    <version>2.0.27</version>
</dependency>

<!-- JSONå¤„ç† -->
<dependency>
    <groupId>com.alibaba</groupId>
    <artifactId>fastjson</artifactId>
    <version>2.0.52</version>
</dependency>
```

**ç‰¹æ®Šæ’ä»¶**:
```xml
<!-- Launch4j - ç”ŸæˆWindowså¯æ‰§è¡Œæ–‡ä»¶ -->
<plugin>
    <groupId>com.akathist.maven.plugins.launch4j</groupId>
    <artifactId>launch4j-maven-plugin</artifactId>
    <version>2.1.2</version>
</plugin>
```

## ğŸ”„ ä¸šåŠ¡æµç¨‹è®¾è®¡

### æ‰“å°ä»»åŠ¡å¤„ç†æµç¨‹
```mermaid
graph TD
    A[æ¥æ”¶æ‰“å°è¯·æ±‚] --> B[åˆ›å»ºPrintTask]
    B --> C[ä»»åŠ¡æŒä¹…åŒ–]
    C --> D[æ·»åŠ åˆ°é˜Ÿåˆ—]
    D --> E{é˜Ÿåˆ—æ˜¯å¦å·²æ»¡?}
    E -->|æ˜¯| F[è¿”å›é”™è¯¯]
    E -->|å¦| G[å®šæ—¶é˜Ÿåˆ—å¤„ç†]
    G --> H[å–å‡ºä»»åŠ¡]
    H --> I[æ›´æ–°çŠ¶æ€ä¸ºPRINTING]
    I --> J[å¼‚æ­¥æ‰§è¡Œæ‰“å°]
    J --> K{æ‰“å°æ˜¯å¦æˆåŠŸ?}
    K -->|æ˜¯| L[æ ‡è®°ä¸ºCOMPLETED]
    K -->|å¦| M{æ˜¯å¦è¾¾åˆ°é‡è¯•ä¸Šé™?}
    M -->|å¦| N[é‡æ–°å…¥é˜Ÿ]
    M -->|æ˜¯| O[æ ‡è®°ä¸ºFAILED]
    L --> P[WebSocketé€šçŸ¥]
    O --> P
    N --> Q[å»¶è¿Ÿé‡è¯•]
    Q --> G
```

### ç”¨æˆ·è®¤è¯æµç¨‹
```mermaid
graph TD
    A[å‰ç«¯ç™»å½•è¯·æ±‚] --> B[UserAuthController.login]
    B --> C[UserAuthService.login]
    C --> D[RemoteDataServiceéªŒè¯]
    D --> E{éªŒè¯æ˜¯å¦æˆåŠŸ?}
    E -->|æ˜¯| F[å­˜å‚¨ç”¨æˆ·ä¿¡æ¯]
    E -->|å¦| G[è¿”å›é”™è¯¯ä¿¡æ¯]
    F --> H[è¿”å›ç”¨æˆ·æ•°æ®]
    H --> I[å‰ç«¯å­˜å‚¨åˆ°localStorage]
```

### WebSocketé€šä¿¡æµç¨‹
```mermaid
graph TD
    A[å®¢æˆ·ç«¯è¿æ¥] --> B[/print-wsç«¯ç‚¹]
    B --> C[å»ºç«‹WebSocketè¿æ¥]
    C --> D[è®¢é˜…/topicé¢‘é“]
    D --> E[ä»»åŠ¡çŠ¶æ€å˜æ›´]
    E --> F[notificationService.notifyClient]
    F --> G[é€šè¿‡/topicå¹¿æ’­]
    G --> H[å®¢æˆ·ç«¯æ¥æ”¶æ›´æ–°]
```

## ğŸ”§ çº¿ç¨‹æ± ä¸è°ƒåº¦é…ç½®

### çº¿ç¨‹æ± é…ç½®
**æ–‡ä»¶**: `config/ThreadPoolConfig.java` (31è¡Œ)
```java
@Configuration
@EnableAsync
public class ThreadPoolConfig {
    
    @Bean("printTaskExecutor")
    public Executor printTaskExecutor() {
        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();
        executor.setCorePoolSize(2);        // æ ¸å¿ƒçº¿ç¨‹æ•°
        executor.setMaxPoolSize(5);         // æœ€å¤§çº¿ç¨‹æ•°
        executor.setQueueCapacity(100);     // é˜Ÿåˆ—å®¹é‡
        executor.setThreadNamePrefix("PrintTask-");
        return executor;
    }
}
```

### è°ƒåº¦å™¨é…ç½®
**æ–‡ä»¶**: `config/SchedulerConfig.java` (30è¡Œ)
- æ”¯æŒ`@Scheduled`æ³¨è§£
- å®šæ—¶ä»»åŠ¡é˜Ÿåˆ—å¤„ç†(æ¯ç§’æ‰§è¡Œä¸€æ¬¡)
- è‡ªåŠ¨ä»»åŠ¡æ¢å¤æœºåˆ¶

## ğŸ“Š ç›‘æ§ä¸æŒ‡æ ‡

### æ€§èƒ½æŒ‡æ ‡æ”¶é›†
**æ–‡ä»¶**: `component/PrintMetrics.java` (31è¡Œ)
```java
@Component
public class PrintMetrics {
    private final AtomicInteger successCount = new AtomicInteger(0);
    private final AtomicInteger totalCount = new AtomicInteger(0);
    
    public void recordSuccess() {
        successCount.incrementAndGet();
        totalCount.incrementAndGet();
    }
    
    public double getSuccessRate() {
        int total = totalCount.get();
        return total == 0 ? 0.0 : (double) successCount.get() / total * 100;
    }
}
```

### ç³»ç»ŸçŠ¶æ€ç›‘æ§
- **é˜Ÿåˆ—å¤§å°ç›‘æ§** - å®æ—¶é˜Ÿåˆ—ä»»åŠ¡æ•°é‡
- **æˆåŠŸç‡ç»Ÿè®¡** - æ‰“å°ä»»åŠ¡æˆåŠŸç‡è®¡ç®—
- **æ‰“å°æœºçŠ¶æ€** - æ‰“å°æœºå°±ç»ªçŠ¶æ€æ£€æµ‹
- **æ—¥å¿—è®°å½•** - è¯¦ç»†çš„æ“ä½œæ—¥å¿—å’Œé”™è¯¯è¿½è¸ª

## ğŸš€ æ„å»ºä¸éƒ¨ç½²

### Mavenæ„å»ºæµç¨‹
```bash
# æ¸…ç†å¹¶ç¼–è¯‘
mvn clean compile

# è¿è¡Œæµ‹è¯•
mvn test

# æ‰“åŒ…JAR
mvn package

# ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶
mvn package -P launch4j
```

### æ„å»ºäº§ç‰©
1. **JARæ–‡ä»¶**: `target/boot_print-0.0.1-SNAPSHOT.jar`
2. **EXEæ–‡ä»¶**: `target/boot_print.exe` (Launch4jç”Ÿæˆ)
3. **ä¾èµ–åº“**: Mavenè‡ªåŠ¨ç®¡ç†ä¾èµ–

### éƒ¨ç½²ç‰¹æ€§
- âœ… **å†…åµŒTomcat** - æ— éœ€å¤–éƒ¨åº”ç”¨æœåŠ¡å™¨
- âœ… **è‡ªåŒ…å«JAR** - åŒ…å«æ‰€æœ‰ä¾èµ–
- âœ… **Windowså¯æ‰§è¡Œæ–‡ä»¶** - Launch4jç”ŸæˆEXE
- âœ… **é…ç½®å¤–éƒ¨åŒ–** - æ”¯æŒå¤–éƒ¨é…ç½®æ–‡ä»¶è¦†ç›–

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### å¼‚æ­¥å¤„ç†ä¼˜åŒ–
- **å¼‚æ­¥æ‰“å°æ‰§è¡Œ** - CompletableFutureå¼‚æ­¥å¤„ç†
- **çº¿ç¨‹æ± ç®¡ç†** - ä¸“ç”¨æ‰“å°ä»»åŠ¡çº¿ç¨‹æ± 
- **é˜Ÿåˆ—ç¼“å†²** - BlockingQueueç¼“è§£å¹¶å‘å‹åŠ›

### å†…å­˜ç®¡ç†ä¼˜åŒ–
- **å¯¹è±¡æ± åŒ–** - å¤ç”¨PrintTaskå¯¹è±¡
- **åŠæ—¶é‡Šæ”¾** - å®Œæˆä»»åŠ¡ååŠæ—¶æ¸…ç†
- **å†…å­˜ç›‘æ§** - JVMå‚æ•°è°ƒä¼˜

### ç½‘ç»œé€šä¿¡ä¼˜åŒ–
- **è¿æ¥å¤ç”¨** - WebSocketé•¿è¿æ¥
- **å¿ƒè·³æœºåˆ¶** - ä¿æŒè¿æ¥æ´»è·ƒ
- **é‡è¿ç­–ç•¥** - è‡ªåŠ¨æ–­çº¿é‡è¿

## ğŸ” å®‰å…¨ä¸å¯é æ€§

### æ•°æ®å®‰å…¨
- **è¾“å…¥éªŒè¯** - ä¸¥æ ¼çš„å‚æ•°æ ¡éªŒ
- **SQLæ³¨å…¥é˜²æŠ¤** - è™½ç„¶ä¸ä½¿ç”¨æ•°æ®åº“ï¼Œä½†åšå¥½JSONæ³¨å…¥é˜²æŠ¤
- **è·¨åŸŸé…ç½®** - åˆç†çš„CORSè®¾ç½®

### ç³»ç»Ÿå¯é æ€§
- **å¼‚å¸¸å¤„ç†** - å®Œå–„çš„å¼‚å¸¸æ•è·å’Œå¤„ç†
- **é‡è¯•æœºåˆ¶** - æŒ‡æ•°é€€é¿é‡è¯•ç®—æ³•
- **æŒä¹…åŒ–æ¢å¤** - ç³»ç»Ÿé‡å¯åä»»åŠ¡æ¢å¤
- **æ—¥å¿—è®°å½•** - è¯¦ç»†çš„æ“ä½œå®¡è®¡æ—¥å¿—

## ğŸ§ª æµ‹è¯•ä¸è°ƒè¯•

### æµ‹è¯•æ¨¡å¼
```yaml
print:
  test-mode: true  # å¯ç”¨æµ‹è¯•æ¨¡å¼ï¼Œæ‰“å°å†…å®¹ä¿å­˜åˆ°æ–‡ä»¶
```

### æ—¥å¿—é…ç½®
```yaml
logging:
  level:
    org.example.print: DEBUG
    org.example.print.service.RemoteDataService: DEBUG
```

### è°ƒè¯•æŠ€å·§
- **æ—¥å¿—åˆ†æ** - ä½¿ç”¨logbackæ»šåŠ¨æ—¥å¿—
- **é˜Ÿåˆ—ç›‘æ§** - å®æ—¶ç›‘æ§é˜Ÿåˆ—çŠ¶æ€
- **æ€§èƒ½åˆ†æ** - JVMæ€§èƒ½ç›‘æ§å·¥å…·

## ğŸ“ æ‰©å±•å»ºè®®

### çŸ­æœŸä¼˜åŒ–
1. **æ•°æ®åº“é›†æˆ** - æ›¿æ¢æ–‡ä»¶å­˜å‚¨ä¸ºå…³ç³»å‹æ•°æ®åº“
2. **ç¼“å­˜æœºåˆ¶** - å¼•å…¥Redisç¼“å­˜çƒ­ç‚¹æ•°æ®
3. **ç›‘æ§å‘Šè­¦** - é›†æˆSpring Boot Actuator
4. **APIæ–‡æ¡£** - ä½¿ç”¨Swaggerç”ŸæˆAPIæ–‡æ¡£

### é•¿æœŸè§„åˆ’
1. **å¾®æœåŠ¡åŒ–** - æ‹†åˆ†ä¸ºç‹¬ç«‹çš„æ‰“å°æœåŠ¡
2. **äº‘åŸç”Ÿæ”¯æŒ** - Dockerå®¹å™¨åŒ–éƒ¨ç½²
3. **é›†ç¾¤æ”¯æŒ** - å¤šå®ä¾‹è´Ÿè½½å‡è¡¡
4. **æ¶ˆæ¯é˜Ÿåˆ—** - ä½¿ç”¨RabbitMQæˆ–Kafka

---

## ğŸ“ ç»´æŠ¤è®°å½•

- **æ–‡æ¡£åˆ›å»ºæ—¶é—´**: 2024å¹´12æœˆ
- **åç«¯ç‰ˆæœ¬**: Spring Boot 2.6.13
- **æ–‡æ¡£çŠ¶æ€**: âœ… å®Œæ•´æŠ€æœ¯åˆ†æå®Œæˆ
- **æœ€åæ›´æ–°**: è¯¦ç»†åç«¯æ¶æ„åˆ†æ

---
*æœ¬æ–‡æ¡£åŸºäºåç«¯æºä»£ç æ·±åº¦åˆ†æç”Ÿæˆï¼Œä¸ºåç«¯å¼€å‘å’Œç»´æŠ¤æä¾›å…¨é¢æŒ‡å—ã€‚* 